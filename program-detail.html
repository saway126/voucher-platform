<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë°”ìš°ì²˜ ì‚¬ì—… ìƒì„¸ - ê¸°ëŒ€í”ŒëŸ¬ìŠ¤</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ¯</text></svg>">
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-text">ê¸°ëŒ€í”ŒëŸ¬ìŠ¤</div>
                </div>
                
                <!-- í–„ë²„ê±° ë©”ë‰´ ë²„íŠ¼ (ëª¨ë°”ì¼) -->
                <button class="hamburger" onclick="toggleMobileMenu()">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
                
                <!-- ë°ìŠ¤í¬í†± ë„¤ë¹„ê²Œì´ì…˜ -->
                <nav class="nav desktop-nav">
                    <ul>
                        <li><a href="/">í™ˆ</a></li>
                        <li><a href="/programs">ë°”ìš°ì²˜ ì‚¬ì—…</a></li>
                        <li><a href="/apply">ë°”ìš°ì²˜ ì‹ ì²­</a></li>
                        <li><a href="/mypage">ë§ˆì´í˜ì´ì§€</a></li>
                        <li><a href="/support">ê³ ê°ì§€ì›</a></li>
                    </ul>
                </nav>
                
                <!-- ë°ìŠ¤í¬í†± ì‚¬ìš©ì ë©”ë‰´ -->
                <div class="user-menu desktop-user-menu">
                    <button class="btn-login" onclick="showLoginModal()">ë¡œê·¸ì¸</button>
                    <button class="btn-register" onclick="showRegisterModal()">íšŒì›ê°€ì…</button>
                    <button class="btn-demo" onclick="demoLogin()">ê°„í¸ ë¡œê·¸ì¸</button>
                    <button class="btn-admin" onclick="showAdminPanel()" style="display: none;">ê´€ë¦¬ì</button>
                </div>
            </div>
            
            <!-- ëª¨ë°”ì¼ ë©”ë‰´ -->
            <div class="mobile-menu" id="mobileMenu">
                <nav class="mobile-nav">
                    <ul>
                        <li><a href="/" onclick="closeMobileMenu()">í™ˆ</a></li>
                        <li><a href="/programs" onclick="closeMobileMenu()">ë°”ìš°ì²˜ ì‚¬ì—…</a></li>
                        <li><a href="/apply" onclick="closeMobileMenu()">ë°”ìš°ì²˜ ì‹ ì²­</a></li>
                        <li><a href="/mypage" onclick="closeMobileMenu()">ë§ˆì´í˜ì´ì§€</a></li>
                        <li><a href="/support" onclick="closeMobileMenu()">ê³ ê°ì§€ì›</a></li>
                    </ul>
                </nav>
                <div class="mobile-user-menu">
                    <button class="btn-login" onclick="showLoginModal(); closeMobileMenu();">ë¡œê·¸ì¸</button>
                    <button class="btn-register" onclick="showRegisterModal(); closeMobileMenu();">íšŒì›ê°€ì…</button>
                    <button class="btn-demo" onclick="demoLogin(); closeMobileMenu();">ê°„í¸ ë¡œê·¸ì¸</button>
                    <button class="btn-admin" onclick="showAdminPanel(); closeMobileMenu();" style="display: none;">ê´€ë¦¬ì</button>
                </div>
            </div>
        </div>
    </header>

    <main>
        <!-- ë°”ìš°ì²˜ ì‚¬ì—… ìƒì„¸ ì„¹ì…˜ -->
        <section class="program-detail">
            <div class="container">
                <div class="breadcrumb">
                    <a href="/">í™ˆ</a> > <a href="/programs">ë°”ìš°ì²˜ ì‚¬ì—…</a> > <span id="programTitle">ì‚¬ì—… ìƒì„¸</span>
                </div>
                
                <div class="program-detail-content">
                    <div class="program-header">
                        <div class="program-category" id="programCategory">ì¹´í…Œê³ ë¦¬</div>
                        <h1 id="programName">ë°”ìš°ì²˜ ì‚¬ì—…ëª…</h1>
                        <div class="program-status" id="programStatus">ì§„í–‰ì¤‘</div>
                    </div>
                    
                    <div class="program-info-grid">
                        <div class="program-main-info">
                            <div class="program-image">
                                <img id="programImage" src="https://via.placeholder.com/600x400/2E7D32/ffffff?text=ë°”ìš°ì²˜+ì‚¬ì—…" alt="ë°”ìš°ì²˜ ì‚¬ì—… ì´ë¯¸ì§€">
                            </div>
                            
                            <div class="program-description">
                                <h3>ì‚¬ì—… ê°œìš”</h3>
                                <p id="programDescription">ë°”ìš°ì²˜ ì‚¬ì—…ì— ëŒ€í•œ ìƒì„¸í•œ ì„¤ëª…ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</p>
                            </div>
                            
                            <div class="program-benefits">
                                <h3>ì§€ì› í˜œíƒ</h3>
                                <ul id="programBenefits">
                                    <li>ìµœëŒ€ 100ë§Œì› ì§€ì›</li>
                                    <li>êµìœ¡ë¹„ 100% ì§€ì›</li>
                                    <li>ìê²©ì¦ ì·¨ë“ ì§€ì›</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div class="program-sidebar">
                            <div class="application-box">
                                <h3>ì‹ ì²­ ì •ë³´</h3>
                                <div class="info-item">
                                    <span class="label">ì‹ ì²­ ê¸°ê°„:</span>
                                    <span id="applicationPeriod">2024.01.01 ~ 2024.12.31</span>
                                </div>
                                <div class="info-item">
                                    <span class="label">ì§€ì› ê¸ˆì•¡:</span>
                                    <span id="supportAmount">ìµœëŒ€ 100ë§Œì›</span>
                                </div>
                                <div class="info-item">
                                    <span class="label">ëŒ€ìƒì:</span>
                                    <span id="targetAudience">ì¼ë°˜ì¸</span>
                                </div>
                                <div class="info-item">
                                    <span class="label">ì‹ ì²­ ë°©ë²•:</span>
                                    <span id="applicationMethod">ì˜¨ë¼ì¸ ì‹ ì²­</span>
                                </div>
                                
                                <div class="action-buttons">
                                    <button class="btn-primary" onclick="applyProgram()">ë°”ìš°ì²˜ ì‹ ì²­í•˜ê¸°</button>
                                    <button class="btn-secondary" onclick="addToWishlist()">ê´€ì‹¬ì‚¬ì—… ë“±ë¡</button>
                                </div>
                            </div>
                            
                            <div class="program-stats">
                                <h3>ì‹ ì²­ í˜„í™©</h3>
                                <div class="stat-item">
                                    <span class="stat-number" id="totalApplications">1,234</span>
                                    <span class="stat-label">ì´ ì‹ ì²­ì</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-number" id="remainingSlots">766</span>
                                    <span class="stat-label">ì”ì—¬ ì •ì›</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="program-details-tabs">
                        <button class="tab-btn active" onclick="showDetailTab('eligibility')">ì§€ì› ìê²©</button>
                        <button class="tab-btn" onclick="showDetailTab('process')">ì‹ ì²­ ì ˆì°¨</button>
                        <button class="tab-btn" onclick="showDetailTab('documents')">í•„ìš” ì„œë¥˜</button>
                        <button class="tab-btn" onclick="showDetailTab('faq')">ìì£¼ ë¬»ëŠ” ì§ˆë¬¸</button>
                    </div>
                    
                    <div class="tab-content">
                        <div id="eligibility-content" class="tab-panel active">
                            <h3>ì§€ì› ìê²©</h3>
                            <ul>
                                <li>ë§Œ 18ì„¸ ì´ìƒ ì„±ì¸</li>
                                <li>ì†Œë“ ê¸°ì¤€ ì¶©ì¡±</li>
                                <li>ê´€ë ¨ ë¶„ì•¼ ê²½í—˜ ë˜ëŠ” ê´€ì‹¬</li>
                                <li>êµìœ¡ ì´ìˆ˜ ì˜ì§€</li>
                            </ul>
                        </div>
                        
                        <div id="process-content" class="tab-panel">
                            <h3>ì‹ ì²­ ì ˆì°¨</h3>
                            <ol>
                                <li>ì˜¨ë¼ì¸ ì‹ ì²­ì„œ ì‘ì„±</li>
                                <li>í•„ìš” ì„œë¥˜ ì œì¶œ</li>
                                <li>ì‹¬ì‚¬ ë° ì„ ë°œ</li>
                                <li>êµìœ¡ ì°¸ì—¬</li>
                                <li>ë°”ìš°ì²˜ ì§€ê¸‰</li>
                            </ol>
                        </div>
                        
                        <div id="documents-content" class="tab-panel">
                            <h3>í•„ìš” ì„œë¥˜</h3>
                            <ul>
                                <li>ì‹ ë¶„ì¦ ì‚¬ë³¸</li>
                                <li>ì†Œë“ ì¦ëª…ì„œ</li>
                                <li>ìê¸°ì†Œê°œì„œ</li>
                                <li>ì§€ì› ë™ê¸°ì„œ</li>
                            </ul>
                        </div>
                        
                        <div id="faq-content" class="tab-panel">
                            <h3>ìì£¼ ë¬»ëŠ” ì§ˆë¬¸</h3>
                            <div class="faq-item">
                                <h4>Q. ì§€ì› ê¸ˆì•¡ì€ ì–¸ì œ ì§€ê¸‰ë˜ë‚˜ìš”?</h4>
                                <p>A. êµìœ¡ ì™„ë£Œ í›„ 1ê°œì›” ì´ë‚´ì— ì§€ê¸‰ë©ë‹ˆë‹¤.</p>
                            </div>
                            <div class="faq-item">
                                <h4>Q. ì¤‘ë„ í¬ê¸° ì‹œ ì–´ë–»ê²Œ ë˜ë‚˜ìš”?</h4>
                                <p>A. ì¤‘ë„ í¬ê¸° ì‹œ ì§€ì› ê¸ˆì•¡ì€ ì§€ê¸‰ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>ê¸°ëŒ€í”ŒëŸ¬ìŠ¤</h3>
                    <p>ë°”ìš°ì²˜ í”Œë«í¼ìœ¼ë¡œ ë” ë‚˜ì€ ë¯¸ë˜ë¥¼ ë§Œë“¤ì–´ê°‘ë‹ˆë‹¤.</p>
                </div>
                <div class="footer-section">
                    <h4>ë°”ìš°ì²˜ ì‚¬ì—…</h4>
                    <ul>
                        <li><a href="/programs">ì „ì²´ ì‚¬ì—…</a></li>
                        <li><a href="/programs?category=education">êµìœ¡ ë¶„ì•¼</a></li>
                        <li><a href="/programs?category=healthcare">ì˜ë£Œ ë¶„ì•¼</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>ê³ ê°ì§€ì›</h4>
                    <ul>
                        <li><a href="/support">ìì£¼ ë¬»ëŠ” ì§ˆë¬¸</a></li>
                        <li><a href="/support/contact">ë¬¸ì˜í•˜ê¸°</a></li>
                        <li><a href="/support/guide">ì´ìš© ê°€ì´ë“œ</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 ê¸°ëŒ€í”ŒëŸ¬ìŠ¤. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="api-client.js"></script>
    <script src="script.js"></script>
    <script src="enhanced-features.js"></script>
    <script>
        // í˜ì´ì§€ ë¡œë“œ ì‹œ í”„ë¡œê·¸ë¨ ì •ë³´ ë¡œë“œ
        document.addEventListener('DOMContentLoaded', function() {
            loadProgramDetail();
            initUserInterface();
        });

        // URLì—ì„œ í”„ë¡œê·¸ë¨ ID ì¶”ì¶œ
        function getProgramId() {
            const path = window.location.pathname;
            const match = path.match(/\/programs\/(\d+)/);
            return match ? match[1] : null;
        }

        // í”„ë¡œê·¸ë¨ ìƒì„¸ ì •ë³´ ë¡œë“œ
        async function loadProgramDetail() {
            const programId = getProgramId();
            if (!programId) {
                console.error('í”„ë¡œê·¸ë¨ IDë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }

            try {
                const response = await fetch(`/api/programs/${programId}`);
                if (!response.ok) {
                    throw new Error('í”„ë¡œê·¸ë¨ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                }
                
                const program = await response.json();
                displayProgramDetail(program);
            } catch (error) {
                console.error('í”„ë¡œê·¸ë¨ ì •ë³´ ë¡œë“œ ì‹¤íŒ¨:', error);
                // ë”ë¯¸ ë°ì´í„°ë¡œ í‘œì‹œ
                displayDummyProgram();
            }
        }

        // í”„ë¡œê·¸ë¨ ìƒì„¸ ì •ë³´ í‘œì‹œ
        function displayProgramDetail(program) {
            document.getElementById('programTitle').textContent = program.name;
            document.getElementById('programName').textContent = program.name;
            document.getElementById('programCategory').textContent = program.category;
            document.getElementById('programStatus').textContent = program.status;
            document.getElementById('programDescription').textContent = program.description;
            document.getElementById('applicationPeriod').textContent = `${program.startDate} ~ ${program.endDate}`;
            document.getElementById('supportAmount').textContent = `ìµœëŒ€ ${program.maxAmount}ë§Œì›`;
            document.getElementById('targetAudience').textContent = program.targetAudience;
            document.getElementById('applicationMethod').textContent = program.applicationMethod;
            document.getElementById('totalApplications').textContent = program.totalApplications || '0';
            document.getElementById('remainingSlots').textContent = program.remainingSlots || '0';
            
            if (program.benefits && Array.isArray(program.benefits)) {
                const benefitsList = document.getElementById('programBenefits');
                benefitsList.innerHTML = program.benefits.map(benefit => `<li>${benefit}</li>`).join('');
            }
        }

        // ë”ë¯¸ í”„ë¡œê·¸ë¨ ë°ì´í„° í‘œì‹œ
        function displayDummyProgram() {
            const dummyProgram = {
                name: 'ë””ì§€í„¸ ìŠ¤í‚¬ ì—…ê·¸ë ˆì´ë“œ ë°”ìš°ì²˜',
                category: 'êµìœ¡',
                status: 'ì§„í–‰ì¤‘',
                description: '4ì°¨ ì‚°ì—…í˜ëª… ì‹œëŒ€ì— í•„ìš”í•œ ë””ì§€í„¸ ìŠ¤í‚¬ì„ ìŠµë“í•  ìˆ˜ ìˆëŠ” ë°”ìš°ì²˜ ì‚¬ì—…ì…ë‹ˆë‹¤. ë‹¤ì–‘í•œ ì˜¨ë¼ì¸ ê°•ì˜ì™€ ì‹¤ìŠµì„ í†µí•´ ì‹¤ë¬´ì— ë°”ë¡œ ì ìš©í•  ìˆ˜ ìˆëŠ” ê¸°ìˆ ì„ ë°°ìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
                startDate: '2024.01.01',
                endDate: '2024.12.31',
                maxAmount: 100,
                targetAudience: 'ì¼ë°˜ì¸',
                applicationMethod: 'ì˜¨ë¼ì¸ ì‹ ì²­',
                totalApplications: 1234,
                remainingSlots: 766,
                benefits: [
                    'ìµœëŒ€ 100ë§Œì› ì§€ì›',
                    'êµìœ¡ë¹„ 100% ì§€ì›',
                    'ìê²©ì¦ ì·¨ë“ ì§€ì›',
                    'ì·¨ì—… ì—°ê³„ ì„œë¹„ìŠ¤'
                ]
            };
            displayProgramDetail(dummyProgram);
        }

        // ë°”ìš°ì²˜ ì‹ ì²­
        function applyProgram() {
            const programId = getProgramId();
            if (!programId) return;
            
            // ë¡œê·¸ì¸ í™•ì¸
            const currentUser = localStorage.getItem('currentUser');
            if (!currentUser) {
                alert('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                showLoginModal();
                return;
            }
            
            // ì‹ ì²­ í˜ì´ì§€ë¡œ ì´ë™
            window.location.href = `/apply?program=${programId}`;
        }

        // ê´€ì‹¬ì‚¬ì—… ë“±ë¡
        function addToWishlist() {
            const programId = getProgramId();
            if (!programId) return;
            
            const currentUser = localStorage.getItem('currentUser');
            if (!currentUser) {
                alert('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.');
                showLoginModal();
                return;
            }
            
            // ê´€ì‹¬ì‚¬ì—… ë“±ë¡ ë¡œì§
            alert('ê´€ì‹¬ì‚¬ì—…ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.');
        }

        // íƒ­ ì „í™˜
        function showDetailTab(tabName) {
            // ëª¨ë“  íƒ­ ë²„íŠ¼ ë¹„í™œì„±í™”
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-panel').forEach(panel => panel.classList.remove('active'));
            
            // ì„ íƒëœ íƒ­ í™œì„±í™”
            event.target.classList.add('active');
            document.getElementById(`${tabName}-content`).classList.add('active');
        }

        // ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ ì´ˆê¸°í™”
        function initUserInterface() {
            try {
                const currentUser = localStorage.getItem('currentUser');
                if (currentUser) {
                    const user = JSON.parse(currentUser);
                    if (user && user.name) {
                        updateUserInterface(user);
                    }
                }
            } catch (error) {
                console.warn('ì‚¬ìš©ì ì •ë³´ ë¡œë“œ ì¤‘ ì˜¤ë¥˜:', error);
                localStorage.removeItem('currentUser');
            }
        }

        // ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ ì—…ë°ì´íŠ¸
        function updateUserInterface(user) {
            if (!user || !user.name) {
                console.warn('ì‚¬ìš©ì ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }
            
            const userMenu = document.querySelector('.user-menu');
            if (userMenu) {
                userMenu.innerHTML = `
                    <span class="user-info">ì•ˆë…•í•˜ì„¸ìš”, ${user.name}ë‹˜!</span>
                    <button class="btn-logout" onclick="logout()">ë¡œê·¸ì•„ì›ƒ</button>
                    <button class="btn-admin" onclick="showAdminPanel()">ê´€ë¦¬ì</button>
                `;
            }
        }

        // ë¡œê·¸ì•„ì›ƒ
        function logout() {
            localStorage.removeItem('currentUser');
            location.reload();
        }

        // ëª¨ë°”ì¼ ë©”ë‰´ í† ê¸€
        function toggleMobileMenu() {
            const mobileMenu = document.getElementById('mobileMenu');
            const hamburger = document.querySelector('.hamburger');
            
            if (mobileMenu.classList.contains('active')) {
                closeMobileMenu();
            } else {
                mobileMenu.classList.add('active');
                hamburger.classList.add('active');
            }
        }

        // ëª¨ë°”ì¼ ë©”ë‰´ ë‹«ê¸°
        function closeMobileMenu() {
            const mobileMenu = document.getElementById('mobileMenu');
            const hamburger = document.querySelector('.hamburger');
            
            mobileMenu.classList.remove('active');
            hamburger.classList.remove('active');
        }
    </script>
</body>
</html>
