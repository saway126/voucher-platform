<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë°”ìš°ì²˜ ì‹ ì²­ - ê¸°ëŒ€í”ŒëŸ¬ìŠ¤</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ“</text></svg>">
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-text">ê¸°ëŒ€í”ŒëŸ¬ìŠ¤</div>
                </div>
                
                <!-- í–„ë²„ê±° ë©”ë‰´ ë²„íŠ¼ (ëª¨ë°”ì¼) -->
                <button class="hamburger" onclick="toggleMobileMenu()">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
                
                <!-- ë°ìŠ¤í¬í†± ë„¤ë¹„ê²Œì´ì…˜ -->
                <nav class="nav desktop-nav">
                    <ul>
                        <li><a href="/">í™ˆ</a></li>
                        <li><a href="/programs">ë°”ìš°ì²˜ ì‚¬ì—…</a></li>
                        <li><a href="/apply" class="active">ë°”ìš°ì²˜ ì‹ ì²­</a></li>
                        <li><a href="/mypage">ë§ˆì´í˜ì´ì§€</a></li>
                        <li><a href="/support">ê³ ê°ì§€ì›</a></li>
                    </ul>
                </nav>
                
                <!-- ë°ìŠ¤í¬í†± ì‚¬ìš©ì ë©”ë‰´ -->
                <div class="user-menu desktop-user-menu">
                    <button class="btn-login" onclick="showLoginModal()">ë¡œê·¸ì¸</button>
                    <button class="btn-register" onclick="showRegisterModal()">íšŒì›ê°€ì…</button>
                    <button class="btn-demo" onclick="demoLogin()">ê°„í¸ ë¡œê·¸ì¸</button>
                    <button class="btn-admin" onclick="showAdminPanel()" style="display: none;">ê´€ë¦¬ì</button>
                </div>
            </div>
            
            <!-- ëª¨ë°”ì¼ ë©”ë‰´ -->
            <div class="mobile-menu" id="mobileMenu">
                <nav class="mobile-nav">
                    <ul>
                        <li><a href="/" onclick="closeMobileMenu()">í™ˆ</a></li>
                        <li><a href="/programs" onclick="closeMobileMenu()">ë°”ìš°ì²˜ ì‚¬ì—…</a></li>
                        <li><a href="/apply" onclick="closeMobileMenu()" class="active">ë°”ìš°ì²˜ ì‹ ì²­</a></li>
                        <li><a href="/mypage" onclick="closeMobileMenu()">ë§ˆì´í˜ì´ì§€</a></li>
                        <li><a href="/support" onclick="closeMobileMenu()">ê³ ê°ì§€ì›</a></li>
                    </ul>
                </nav>
                <div class="mobile-user-menu">
                    <button class="btn-login" onclick="showLoginModal(); closeMobileMenu();">ë¡œê·¸ì¸</button>
                    <button class="btn-register" onclick="showRegisterModal(); closeMobileMenu();">íšŒì›ê°€ì…</button>
                    <button class="btn-demo" onclick="demoLogin(); closeMobileMenu();">ê°„í¸ ë¡œê·¸ì¸</button>
                    <button class="btn-admin" onclick="showAdminPanel(); closeMobileMenu();" style="display: none;">ê´€ë¦¬ì</button>
                </div>
            </div>
        </div>
    </header>

    <main>
        <!-- ë°”ìš°ì²˜ ì‹ ì²­ ì„¹ì…˜ -->
        <section class="apply-section">
            <div class="container">
                <div class="breadcrumb">
                    <a href="/">í™ˆ</a> > <a href="/programs">ë°”ìš°ì²˜ ì‚¬ì—…</a> > <span>ë°”ìš°ì²˜ ì‹ ì²­</span>
                </div>
                
                <div class="apply-content">
                    <div class="apply-header">
                        <h1>ë°”ìš°ì²˜ ì‹ ì²­</h1>
                        <p>ì›í•˜ëŠ” ë°”ìš°ì²˜ ì‚¬ì—…ì„ ì„ íƒí•˜ê³  ì‹ ì²­í•˜ì„¸ìš”</p>
                    </div>
                    
                    <div class="apply-steps">
                        <div class="step active" data-step="1">
                            <div class="step-number">1</div>
                            <div class="step-title">ì‚¬ì—… ì„ íƒ</div>
                        </div>
                        <div class="step" data-step="2">
                            <div class="step-number">2</div>
                            <div class="step-title">ì •ë³´ ì…ë ¥</div>
                        </div>
                        <div class="step" data-step="3">
                            <div class="step-number">3</div>
                            <div class="step-title">ì„œë¥˜ ì œì¶œ</div>
                        </div>
                        <div class="step" data-step="4">
                            <div class="step-number">4</div>
                            <div class="step-title">ì‹ ì²­ ì™„ë£Œ</div>
                        </div>
                    </div>
                    
                    <!-- 1ë‹¨ê³„: ì‚¬ì—… ì„ íƒ -->
                    <div class="apply-step-content active" id="step-1">
                        <h2>ë°”ìš°ì²˜ ì‚¬ì—… ì„ íƒ</h2>
                        <div class="program-selection">
                            <div class="search-filter">
                                <input type="text" id="programSearch" placeholder="ì‚¬ì—…ëª…ìœ¼ë¡œ ê²€ìƒ‰..." onkeyup="filterPrograms()">
                                <select id="categoryFilter" onchange="filterPrograms()">
                                    <option value="">ì „ì²´ ì¹´í…Œê³ ë¦¬</option>
                                    <option value="education">êµìœ¡</option>
                                    <option value="healthcare">ì˜ë£Œ</option>
                                    <option value="technology">ê¸°ìˆ </option>
                                    <option value="business">ì‚¬ì—…</option>
                                </select>
                            </div>
                            
                            <div class="programs-grid" id="programsGrid">
                                <!-- í”„ë¡œê·¸ë¨ ì¹´ë“œë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
                            </div>
                        </div>
                        
                        <div class="step-actions">
                            <button class="btn-primary" onclick="nextStep(2)" disabled id="nextStep1">ë‹¤ìŒ ë‹¨ê³„</button>
                        </div>
                    </div>
                    
                    <!-- 2ë‹¨ê³„: ì •ë³´ ì…ë ¥ -->
                    <div class="apply-step-content" id="step-2">
                        <h2>ì‹ ì²­ì ì •ë³´ ì…ë ¥</h2>
                        <form id="applicationForm" class="application-form">
                            <div class="form-section">
                                <h3>ê¸°ë³¸ ì •ë³´</h3>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="applicantName">ì´ë¦„ *</label>
                                        <input type="text" id="applicantName" name="name" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="applicantEmail">ì´ë©”ì¼ *</label>
                                        <input type="email" id="applicantEmail" name="email" required>
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="applicantPhone">íœ´ëŒ€í° ë²ˆí˜¸ *</label>
                                        <input type="tel" id="applicantPhone" name="phone" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="applicantBirth">ìƒë…„ì›”ì¼ *</label>
                                        <input type="date" id="applicantBirth" name="birthDate" required>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-section">
                                <h3>ì£¼ì†Œ ì •ë³´</h3>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="applicantAddress">ì£¼ì†Œ *</label>
                                        <input type="text" id="applicantAddress" name="address" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="applicantDetailAddress">ìƒì„¸ì£¼ì†Œ</label>
                                        <input type="text" id="applicantDetailAddress" name="detailAddress">
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-section">
                                <h3>ì†Œë“ ì •ë³´</h3>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="applicantIncome">ì›” ì†Œë“ *</label>
                                        <select id="applicantIncome" name="income" required>
                                            <option value="">ì„ íƒí•˜ì„¸ìš”</option>
                                            <option value="under-100">100ë§Œì› ë¯¸ë§Œ</option>
                                            <option value="100-200">100-200ë§Œì›</option>
                                            <option value="200-300">200-300ë§Œì›</option>
                                            <option value="300-400">300-400ë§Œì›</option>
                                            <option value="over-400">400ë§Œì› ì´ìƒ</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="applicantJob">ì§ì—…</label>
                                        <input type="text" id="applicantJob" name="job">
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-section">
                                <h3>ì‹ ì²­ ë™ê¸°</h3>
                                <div class="form-group">
                                    <label for="applicationReason">ì§€ì› ë™ê¸° *</label>
                                    <textarea id="applicationReason" name="reason" rows="5" required placeholder="ë°”ìš°ì²˜ ì‚¬ì—…ì— ì§€ì›í•˜ëŠ” ì´ìœ ë¥¼ ìì„¸íˆ ì‘ì„±í•´ì£¼ì„¸ìš”."></textarea>
                                </div>
                            </div>
                        </form>
                        
                        <div class="step-actions">
                            <button class="btn-secondary" onclick="prevStep(1)">ì´ì „ ë‹¨ê³„</button>
                            <button class="btn-primary" onclick="nextStep(3)">ë‹¤ìŒ ë‹¨ê³„</button>
                        </div>
                    </div>
                    
                    <!-- 3ë‹¨ê³„: ì„œë¥˜ ì œì¶œ -->
                    <div class="apply-step-content" id="step-3">
                        <h2>í•„ìš” ì„œë¥˜ ì œì¶œ</h2>
                        <div class="documents-section">
                            <div class="document-item">
                                <div class="document-info">
                                    <h4>ì‹ ë¶„ì¦ ì‚¬ë³¸</h4>
                                    <p>ì£¼ë¯¼ë“±ë¡ì¦, ìš´ì „ë©´í—ˆì¦, ì—¬ê¶Œ ì¤‘ í•˜ë‚˜</p>
                                </div>
                                <div class="document-upload">
                                    <input type="file" id="idDocument" accept="image/*,.pdf" onchange="handleFileUpload(this)">
                                    <label for="idDocument" class="upload-btn">íŒŒì¼ ì„ íƒ</label>
                                    <span class="file-name" id="idDocumentName"></span>
                                </div>
                            </div>
                            
                            <div class="document-item">
                                <div class="document-info">
                                    <h4>ì†Œë“ ì¦ëª…ì„œ</h4>
                                    <p>ì†Œë“ê¸ˆì•¡ì¦ëª…ì›, ê¸‰ì—¬ëª…ì„¸ì„œ ë“±</p>
                                </div>
                                <div class="document-upload">
                                    <input type="file" id="incomeDocument" accept="image/*,.pdf" onchange="handleFileUpload(this)">
                                    <label for="incomeDocument" class="upload-btn">íŒŒì¼ ì„ íƒ</label>
                                    <span class="file-name" id="incomeDocumentName"></span>
                                </div>
                            </div>
                            
                            <div class="document-item">
                                <div class="document-info">
                                    <h4>ìê¸°ì†Œê°œì„œ</h4>
                                    <p>ì§€ì› ë™ê¸°ì™€ ê³„íšì„ í¬í•¨í•œ ìê¸°ì†Œê°œì„œ</p>
                                </div>
                                <div class="document-upload">
                                    <input type="file" id="selfIntroDocument" accept="image/*,.pdf,.doc,.docx" onchange="handleFileUpload(this)">
                                    <label for="selfIntroDocument" class="upload-btn">íŒŒì¼ ì„ íƒ</label>
                                    <span class="file-name" id="selfIntroDocumentName"></span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="step-actions">
                            <button class="btn-secondary" onclick="prevStep(2)">ì´ì „ ë‹¨ê³„</button>
                            <button class="btn-primary" onclick="nextStep(4)">ë‹¤ìŒ ë‹¨ê³„</button>
                        </div>
                    </div>
                    
                    <!-- 4ë‹¨ê³„: ì‹ ì²­ ì™„ë£Œ -->
                    <div class="apply-step-content" id="step-4">
                        <div class="completion-section">
                            <div class="completion-icon">âœ…</div>
                            <h2>ì‹ ì²­ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!</h2>
                            <p>ë°”ìš°ì²˜ ì‹ ì²­ì´ ì„±ê³µì ìœ¼ë¡œ ì œì¶œë˜ì—ˆìŠµë‹ˆë‹¤.</p>
                            
                            <div class="application-summary">
                                <h3>ì‹ ì²­ ìš”ì•½</h3>
                                <div class="summary-item">
                                    <span class="label">ì„ íƒí•œ ì‚¬ì—…:</span>
                                    <span id="selectedProgramName">-</span>
                                </div>
                                <div class="summary-item">
                                    <span class="label">ì‹ ì²­ì:</span>
                                    <span id="applicantNameSummary">-</span>
                                </div>
                                <div class="summary-item">
                                    <span class="label">ì‹ ì²­ì¼:</span>
                                    <span id="applicationDate">-</span>
                                </div>
                                <div class="summary-item">
                                    <span class="label">ì‹ ì²­ ë²ˆí˜¸:</span>
                                    <span id="applicationNumber">-</span>
                                </div>
                            </div>
                            
                            <div class="next-steps">
                                <h3>ë‹¤ìŒ ë‹¨ê³„</h3>
                                <ul>
                                    <li>ì‹¬ì‚¬ ê²°ê³¼ëŠ” ì‹ ì²­ í›„ 7-14ì¼ ë‚´ì— ì´ë©”ì¼ë¡œ ì•ˆë‚´ë©ë‹ˆë‹¤.</li>
                                    <li>ì¶”ê°€ ì„œë¥˜ê°€ í•„ìš”í•œ ê²½ìš° ê°œë³„ ì—°ë½ë“œë¦½ë‹ˆë‹¤.</li>
                                    <li>ë¬¸ì˜ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ê³ ê°ì§€ì›ì„¼í„°ë¡œ ì—°ë½í•´ì£¼ì„¸ìš”.</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div class="step-actions">
                            <button class="btn-secondary" onclick="goToHome()">í™ˆìœ¼ë¡œ</button>
                            <button class="btn-primary" onclick="goToMyPage()">ë§ˆì´í˜ì´ì§€</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>ê¸°ëŒ€í”ŒëŸ¬ìŠ¤</h3>
                    <p>ë°”ìš°ì²˜ í”Œë«í¼ìœ¼ë¡œ ë” ë‚˜ì€ ë¯¸ë˜ë¥¼ ë§Œë“¤ì–´ê°‘ë‹ˆë‹¤.</p>
                </div>
                <div class="footer-section">
                    <h4>ë°”ìš°ì²˜ ì‚¬ì—…</h4>
                    <ul>
                        <li><a href="/programs">ì „ì²´ ì‚¬ì—…</a></li>
                        <li><a href="/programs?category=education">êµìœ¡ ë¶„ì•¼</a></li>
                        <li><a href="/programs?category=healthcare">ì˜ë£Œ ë¶„ì•¼</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>ê³ ê°ì§€ì›</h4>
                    <ul>
                        <li><a href="/support">ìì£¼ ë¬»ëŠ” ì§ˆë¬¸</a></li>
                        <li><a href="/support/contact">ë¬¸ì˜í•˜ê¸°</a></li>
                        <li><a href="/support/guide">ì´ìš© ê°€ì´ë“œ</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 ê¸°ëŒ€í”ŒëŸ¬ìŠ¤. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="api-client.js"></script>
    <script src="script.js"></script>
    <script src="enhanced-features.js"></script>
    <script>
        let selectedProgram = null;
        let applicationData = {};

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            loadPrograms();
            initUserInterface();
            setupFormValidation();
        });

        // í”„ë¡œê·¸ë¨ ëª©ë¡ ë¡œë“œ
        async function loadPrograms() {
            try {
                const response = await fetch('/api/programs');
                if (!response.ok) {
                    throw new Error('í”„ë¡œê·¸ë¨ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                }
                
                const programs = await response.json();
                displayPrograms(programs);
            } catch (error) {
                console.error('í”„ë¡œê·¸ë¨ ëª©ë¡ ë¡œë“œ ì‹¤íŒ¨:', error);
                displayDummyPrograms();
            }
        }

        // ë”ë¯¸ í”„ë¡œê·¸ë¨ ë°ì´í„° í‘œì‹œ
        function displayDummyPrograms() {
            const dummyPrograms = [
                {
                    id: 1,
                    name: 'ë””ì§€í„¸ ìŠ¤í‚¬ ì—…ê·¸ë ˆì´ë“œ ë°”ìš°ì²˜',
                    category: 'education',
                    description: '4ì°¨ ì‚°ì—…í˜ëª… ì‹œëŒ€ì— í•„ìš”í•œ ë””ì§€í„¸ ìŠ¤í‚¬ì„ ìŠµë“í•  ìˆ˜ ìˆëŠ” ë°”ìš°ì²˜ ì‚¬ì—…ì…ë‹ˆë‹¤.',
                    maxAmount: 100,
                    status: 'active',
                    startDate: '2024-01-01',
                    endDate: '2024-12-31'
                },
                {
                    id: 2,
                    name: 'ê±´ê°•ê´€ë¦¬ ë°”ìš°ì²˜',
                    category: 'healthcare',
                    description: 'ê±´ê°•í•œ ìƒí™œì„ ìœ„í•œ ì˜ë£Œë¹„ ì§€ì› ë°”ìš°ì²˜ì…ë‹ˆë‹¤.',
                    maxAmount: 50,
                    status: 'active',
                    startDate: '2024-01-01',
                    endDate: '2024-12-31'
                },
                {
                    id: 3,
                    name: 'ì°½ì—… ì§€ì› ë°”ìš°ì²˜',
                    category: 'business',
                    description: 'ì°½ì—…ì„ ìœ„í•œ êµìœ¡ ë° ìê¸ˆ ì§€ì› ë°”ìš°ì²˜ì…ë‹ˆë‹¤.',
                    maxAmount: 200,
                    status: 'active',
                    startDate: '2024-01-01',
                    endDate: '2024-12-31'
                }
            ];
            displayPrograms(dummyPrograms);
        }

        // í”„ë¡œê·¸ë¨ ëª©ë¡ í‘œì‹œ
        function displayPrograms(programs) {
            const grid = document.getElementById('programsGrid');
            grid.innerHTML = programs.map(program => `
                <div class="program-card" onclick="selectProgram(${program.id})" data-program-id="${program.id}">
                    <div class="program-card-header">
                        <span class="program-category">${getCategoryName(program.category)}</span>
                        <span class="program-status ${program.status}">${getStatusName(program.status)}</span>
                    </div>
                    <h3>${program.name}</h3>
                    <p>${program.description}</p>
                    <div class="program-card-footer">
                        <span class="program-amount">ìµœëŒ€ ${program.maxAmount}ë§Œì›</span>
                        <span class="program-period">${program.startDate} ~ ${program.endDate}</span>
                    </div>
                </div>
            `).join('');
        }

        // ì¹´í…Œê³ ë¦¬ëª… ë³€í™˜
        function getCategoryName(category) {
            const categories = {
                'education': 'êµìœ¡',
                'healthcare': 'ì˜ë£Œ',
                'technology': 'ê¸°ìˆ ',
                'business': 'ì‚¬ì—…'
            };
            return categories[category] || category;
        }

        // ìƒíƒœëª… ë³€í™˜
        function getStatusName(status) {
            const statuses = {
                'active': 'ì§„í–‰ì¤‘',
                'upcoming': 'ì˜ˆì •',
                'ended': 'ì¢…ë£Œ'
            };
            return statuses[status] || status;
        }

        // í”„ë¡œê·¸ë¨ ì„ íƒ
        function selectProgram(programId) {
            // ì´ì „ ì„ íƒ í•´ì œ
            document.querySelectorAll('.program-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            // ìƒˆ ì„ íƒ ì ìš©
            const selectedCard = document.querySelector(`[data-program-id="${programId}"]`);
            selectedCard.classList.add('selected');
            
            // ì„ íƒëœ í”„ë¡œê·¸ë¨ ì •ë³´ ì €ì¥
            selectedProgram = {
                id: programId,
                name: selectedCard.querySelector('h3').textContent
            };
            
            // ë‹¤ìŒ ë‹¨ê³„ ë²„íŠ¼ í™œì„±í™”
            document.getElementById('nextStep1').disabled = false;
        }

        // í”„ë¡œê·¸ë¨ í•„í„°ë§
        function filterPrograms() {
            const searchTerm = document.getElementById('programSearch').value.toLowerCase();
            const categoryFilter = document.getElementById('categoryFilter').value;
            
            document.querySelectorAll('.program-card').forEach(card => {
                const programName = card.querySelector('h3').textContent.toLowerCase();
                const programCategory = card.querySelector('.program-category').textContent;
                
                const matchesSearch = programName.includes(searchTerm);
                const matchesCategory = !categoryFilter || programCategory === getCategoryName(categoryFilter);
                
                if (matchesSearch && matchesCategory) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        // ë‹¨ê³„ ì „í™˜
        function nextStep(stepNumber) {
            // í˜„ì¬ ë‹¨ê³„ ë¹„í™œì„±í™”
            document.querySelectorAll('.apply-step-content').forEach(content => {
                content.classList.remove('active');
            });
            document.querySelectorAll('.step').forEach(step => {
                step.classList.remove('active');
            });
            
            // ìƒˆ ë‹¨ê³„ í™œì„±í™”
            document.getElementById(`step-${stepNumber}`).classList.add('active');
            document.querySelector(`[data-step="${stepNumber}"]`).classList.add('active');
            
            // ë‹¨ê³„ë³„ íŠ¹ë³„ ì²˜ë¦¬
            if (stepNumber === 2) {
                fillUserInfo();
            } else if (stepNumber === 4) {
                completeApplication();
            }
        }

        function prevStep(stepNumber) {
            nextStep(stepNumber);
        }

        // ì‚¬ìš©ì ì •ë³´ ìë™ ì…ë ¥
        function fillUserInfo() {
            try {
                const currentUser = localStorage.getItem('currentUser');
                if (currentUser) {
                    const user = JSON.parse(currentUser);
                    document.getElementById('applicantName').value = user.name || '';
                    document.getElementById('applicantEmail').value = user.email || '';
                }
            } catch (error) {
                console.warn('ì‚¬ìš©ì ì •ë³´ ë¡œë“œ ì‹¤íŒ¨:', error);
            }
        }

        // íŒŒì¼ ì—…ë¡œë“œ ì²˜ë¦¬
        function handleFileUpload(input) {
            const fileName = input.files[0]?.name || '';
            const fileNameSpan = document.getElementById(input.id + 'Name');
            fileNameSpan.textContent = fileName;
        }

        // ì‹ ì²­ ì™„ë£Œ ì²˜ë¦¬
        function completeApplication() {
            // ì‹ ì²­ ë°ì´í„° ìˆ˜ì§‘
            const formData = new FormData(document.getElementById('applicationForm'));
            applicationData = Object.fromEntries(formData.entries());
            applicationData.programId = selectedProgram.id;
            applicationData.programName = selectedProgram.name;
            applicationData.applicationDate = new Date().toLocaleDateString();
            applicationData.applicationNumber = 'APP' + Date.now();
            
            // ìš”ì•½ ì •ë³´ í‘œì‹œ
            document.getElementById('selectedProgramName').textContent = selectedProgram.name;
            document.getElementById('applicantNameSummary').textContent = applicationData.name;
            document.getElementById('applicationDate').textContent = applicationData.applicationDate;
            document.getElementById('applicationNumber').textContent = applicationData.applicationNumber;
            
            // ì„œë²„ì— ì‹ ì²­ ë°ì´í„° ì „ì†¡
            submitApplication();
        }

        // ì‹ ì²­ ë°ì´í„° ì„œë²„ ì „ì†¡
        async function submitApplication() {
            try {
                const response = await fetch('/api/applications', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(applicationData)
                });
                
                if (!response.ok) {
                    throw new Error('ì‹ ì²­ ì œì¶œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                }
                
                console.log('ì‹ ì²­ì´ ì„±ê³µì ìœ¼ë¡œ ì œì¶œë˜ì—ˆìŠµë‹ˆë‹¤.');
            } catch (error) {
                console.error('ì‹ ì²­ ì œì¶œ ì‹¤íŒ¨:', error);
                // ì˜¤í”„ë¼ì¸ ëª¨ë“œì—ì„œëŠ” ë¡œì»¬ ì €ì¥
                localStorage.setItem('pendingApplication', JSON.stringify(applicationData));
            }
        }

        // í¼ ìœ íš¨ì„± ê²€ì‚¬ ì„¤ì •
        function setupFormValidation() {
            const form = document.getElementById('applicationForm');
            form.addEventListener('input', validateForm);
        }

        // í¼ ìœ íš¨ì„± ê²€ì‚¬
        function validateForm() {
            const requiredFields = form.querySelectorAll('[required]');
            let isValid = true;
            
            requiredFields.forEach(field => {
                if (!field.value.trim()) {
                    isValid = false;
                }
            });
            
            // ë‹¤ìŒ ë‹¨ê³„ ë²„íŠ¼ í™œì„±í™”/ë¹„í™œì„±í™”
            const nextButton = document.querySelector('#step-2 .btn-primary');
            if (nextButton) {
                nextButton.disabled = !isValid;
            }
        }

        // í™ˆìœ¼ë¡œ ì´ë™
        function goToHome() {
            window.location.href = '/';
        }

        // ë§ˆì´í˜ì´ì§€ë¡œ ì´ë™
        function goToMyPage() {
            window.location.href = '/mypage';
        }

        // ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ ì´ˆê¸°í™”
        function initUserInterface() {
            try {
                const currentUser = localStorage.getItem('currentUser');
                if (currentUser) {
                    const user = JSON.parse(currentUser);
                    if (user && user.name) {
                        updateUserInterface(user);
                    }
                }
            } catch (error) {
                console.warn('ì‚¬ìš©ì ì •ë³´ ë¡œë“œ ì¤‘ ì˜¤ë¥˜:', error);
                localStorage.removeItem('currentUser');
            }
        }

        // ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ ì—…ë°ì´íŠ¸
        function updateUserInterface(user) {
            if (!user || !user.name) {
                console.warn('ì‚¬ìš©ì ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }
            
            const userMenu = document.querySelector('.user-menu');
            if (userMenu) {
                userMenu.innerHTML = `
                    <span class="user-info">ì•ˆë…•í•˜ì„¸ìš”, ${user.name}ë‹˜!</span>
                    <button class="btn-logout" onclick="logout()">ë¡œê·¸ì•„ì›ƒ</button>
                    <button class="btn-admin" onclick="showAdminPanel()">ê´€ë¦¬ì</button>
                `;
            }
        }

        // ë¡œê·¸ì•„ì›ƒ
        function logout() {
            localStorage.removeItem('currentUser');
            location.reload();
        }

        // ëª¨ë°”ì¼ ë©”ë‰´ í† ê¸€
        function toggleMobileMenu() {
            const mobileMenu = document.getElementById('mobileMenu');
            const hamburger = document.querySelector('.hamburger');
            
            if (mobileMenu.classList.contains('active')) {
                closeMobileMenu();
            } else {
                mobileMenu.classList.add('active');
                hamburger.classList.add('active');
            }
        }

        // ëª¨ë°”ì¼ ë©”ë‰´ ë‹«ê¸°
        function closeMobileMenu() {
            const mobileMenu = document.getElementById('mobileMenu');
            const hamburger = document.querySelector('.hamburger');
            
            mobileMenu.classList.remove('active');
            hamburger.classList.remove('active');
        }
    </script>
</body>
</html>
